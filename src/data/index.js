export var index = function () {
  return 'const fs = require(\'fs\');\nconst path = require(\'path\');\n\nconst wpi = require(\'wiring-pi\');\n\nconst Client = require(\'azure-iot-device\').Client;\nconst ConnectionString = require(\'azure-iot-device\').ConnectionString;\nconst Message = require(\'azure-iot-device\').Message;\nconst Protocol = require(\'azure-iot-device-mqtt\').Mqtt;\n\nvar messageId = 0;\nvar client;\nfunction sendMessage() {\n  messageId++;\n  var content = \'{"messageId":\' + messageId  + \'}\';\n    var message = new Message(content);\n    console.log(\'Sending message: \' + content);\n    client.sendEvent(message, (err) => {\n      if (err) {\n        console.error(\'Failed to send message to Azure IoT Hub\');\n      } else {\n        blinkLED();\n        console.log(\'Message sent to Azure IoT Hub\');\n      }\n  });\n}\n\nfunction blinkLED() {\n  wpi.digitalWrite(config.LEDPin, 1);\n  setTimeout(function () {\n    wpi.digitalWrite(config.LEDPin, 0);\n  }, 500);\n}\n\n(function (connectionString) {\n  client = Client.fromConnectionString(connectionString, Protocol);\n\n  client.open((err) => {\n    if (err) {\n      console.error(\'[IoT hub Client] Connect error: \' + err.message);\n      return;\n    }\n    setInterval(sendMessage, 2000);\n  });\n})(process.argv[2]);';
}